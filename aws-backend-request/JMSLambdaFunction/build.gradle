/**
* Â© Copyright IBM Corporation 2018, 2021
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/

apply plugin: 'java'

repositories {
    mavenCentral()
}

dependencies {
    compile group: 'com.amazonaws', name: 'aws-lambda-java-core', version: '1.1.0'
    compile group: 'com.amazonaws', name: 'aws-lambda-java-events', version: '1.1.0'
    compile group: 'com.ibm.mq', name: 'com.ibm.mq.allclient', version: '9.2.0.1'
    compile group: 'javax.jms', name: 'javax.jms-api', version: '2.0.1'

    compile fileTree(dir: 'jars', include: '*.jar')
}

task getDeps(type: Copy) {
    from configurations.compile
    into 'jars/'
}

task buildZip(type: Zip) {
    from compileJava
    from processResources
    into('com/example/lambda/ibmmq'){
        from file("./key.kdb")      
    }
    into('lib') {
        from configurations.compileClasspath
    }           
}

build.dependsOn buildZip